// 2-Player Shooter Game using Multiplayer Extension
// Make sure to add the "multiplayer" extension in MakeCode Arcade!

// Create custom sprite kinds for projectiles
enum SpriteKindLegacy {
    //% isKind
    Player1Projectile,
    //% isKind
    Player2Projectile
}

// Initialize multiplayer
mp.setPlayerSprite(mp.playerSelector(mp.PlayerNumber.One), sprites.create(img`
    . . . . e e e . . . . e e e 
    . . . . c 1 1 c . . c 1 1 c 
    . . . . c b 1 1 f f 1 1 b c 
    . . . . c 3 b 1 b 1 1 b 3 c 
    . . . . f b 3 1 1 1 1 3 b f 
    . . . . e 1 1 1 1 1 1 1 1 e 
    b f b . e 1 f 1 1 1 1 f 1 e 
    f 1 f . f 1 1 1 3 3 1 1 1 f 
    f 1 f . f 2 1 1 1 1 1 1 b f 
    f 1 f f b b 2 2 2 2 2 2 f . 
    f b 1 b b 1 1 1 5 5 1 b f . 
    . f f f 1 1 b 1 1 1 1 1 f . 
    . . . f 1 f f 1 f f f 1 f . 
    . . . f f . . f f . . f f . 
`, SpriteKind.Player))

mp.setPlayerSprite(mp.playerSelector(mp.PlayerNumber.Two), sprites.create(img`
    . . . . . . f f f f . . . . . .
    . . . . f f f 7 7 f f f . . . .
    . . . f f f 7 7 7 7 f f f . . .
    . . f f f e e e e e e f f f . .
    . . f f e 7 7 7 7 7 7 e e f . .
    . . f e 7 f f f f f f 7 e f . .
    . . f f f f e e e e f f f f . .
    . f f e f b f 4 4 f b f e f f .
    . f e e 4 1 f d d f 1 4 e e f .
    . . f e e d d d d d d e e f . .
    . . . f e e 4 4 4 4 e e f . . .
    . . e 4 f 7 7 7 7 7 7 f 4 e . .
    . . 4 d f 7 7 7 7 7 7 f d 4 . .
    . . 4 4 f 4 4 5 5 4 4 f 4 4 . .
    . . . . . f f f f f f . . . . .
    . . . . . f f . . f f . . . . .
`, SpriteKind.Player))

// Get player sprites
let player1 = mp.getPlayerSprite(mp.playerSelector(mp.PlayerNumber.One))
let player2 = mp.getPlayerSprite(mp.playerSelector(mp.PlayerNumber.Two))

// Player facing directions (1 = right, -1 = left)
let player1Facing = 1
let player2Facing = -1

// AI settings
let aiEnabled = true
let aiShootCooldown = 0
let aiJumpCooldown = 0
let aiStrategy = 0  // 0 = aggressive, 1 = defensive, 2 = flanking
let aiStrategyTimer = 0
let aiDodgeTimer = 0

// Difficulty settings
let aiDifficulty = 2  // 0=Easy, 1=Medium, 2=Normal, 3=Hard, 4=Expert
let difficultySettings = {
    moveSpeed: 70,
    shootCooldownMin: 35,
    shootCooldownMax: 60,
    accuracy: 0.7,
    reactionTime: 20,
    dodgeChance: 0.5,
    strategyChangeSpeed: 180
}

// Set starting positions
player1.setPosition(30, 90)
player2.setPosition(130, 90)

// Movement speed
mp.moveWithButtons(mp.playerSelector(mp.PlayerNumber.One), 100, 0)
// Player 2 controlled by AI - no button movement

// Add gravity
player1.ay = 300
player2.ay = 300

// Ground detection
let player1OnGround = false
let player2OnGround = false

// Set player lives
mp.setPlayerState(mp.playerSelector(mp.PlayerNumber.One), MultiplayerState.score, 5)
mp.setPlayerState(mp.playerSelector(mp.PlayerNumber.Two), MultiplayerState.score, 5)

// Create blue sky background with clouds
scene.setBackgroundColor(9)
scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111199999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
`)

// Create platforms
let platforms: Sprite[] = []

function createPlatform(x: number, y: number, width: number) {
    for (let i = 0; i < width; i++) {
        let platform = sprites.create(img`
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 b b b b b b b b b b b b b b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b d d d d d d d d d d d d b 7 
            7 b b b b b b b b b b b b b b 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        `, SpriteKind.Food)
        platform.setPosition(x + i * 16, y)
        platforms.push(platform)
    }
}

// Create platforms - 5 PRESET LEVELS
function generateRandomMap() {
    // Clear any existing platforms
    for (let platform of platforms) {
        platform.destroy()
    }
    platforms = []

    // Randomly pick one of 5 levels
    let levelChoice = Math.randomRange(0, 4)

    if (levelChoice == 0) {
        // LEVEL 1 - Original Layout
        createPlatform(10, 110, 10)
        createPlatform(0, 110, 3)
        createPlatform(150, 110, 7)
        createPlatform(40, 80, 4)
        createPlatform(100, 70, 5)
        createPlatform(60, 50, 3)
        createPlatform(20, 30, 4)
        createPlatform(120, 40, 5)
    } else if (levelChoice == 1) {
        // LEVEL 2 - Staircase Style
        createPlatform(0, 110, 8)
        createPlatform(140, 110, 5)
        createPlatform(20, 85, 4)
        createPlatform(80, 70, 5)
        createPlatform(120, 55, 3)
        createPlatform(40, 40, 4)
        createPlatform(90, 25, 4)
    } else if (levelChoice == 2) {
        // LEVEL 3 - Central Arena
        createPlatform(0, 110, 6)
        createPlatform(130, 110, 8)
        createPlatform(60, 60, 6)
        createPlatform(20, 45, 3)
        createPlatform(110, 45, 3)
        createPlatform(35, 25, 4)
        createPlatform(95, 25, 4)
    } else if (levelChoice == 3) {
        // LEVEL 4 - Towers
        createPlatform(5, 110, 5)
        createPlatform(75, 110, 5)
        createPlatform(145, 110, 4)
        createPlatform(10, 75, 3)
        createPlatform(80, 70, 3)
        createPlatform(140, 75, 3)
        createPlatform(40, 40, 5)
        createPlatform(100, 35, 5)
    } else {
        // LEVEL 5 - Floating Islands
        createPlatform(0, 110, 7)
        createPlatform(120, 110, 10)
        createPlatform(30, 80, 4)
        createPlatform(90, 75, 3)
        createPlatform(10, 50, 3)
        createPlatform(65, 45, 5)
        createPlatform(130, 50, 3)
        createPlatform(45, 20, 4)
    }
}

// Generate the random map
generateRandomMap()

// Player 1 controls - A to shoot, Player 2 controls - A to shoot
mp.onButtonEvent(mp.MultiplayerButton.A, ControllerButtonEvent.Pressed, function (player) {
    // Handle menu confirmation
    if (menuActive && player == mp.playerSelector(mp.PlayerNumber.One)) {
        menuActive = false
        setDifficulty(menuSelection)
        startGame()
        return
    }

    // Don't shoot while in menu
    if (menuActive) return

    if (player == mp.playerSelector(mp.PlayerNumber.One)) {
        // Player 1 shoots with A in the direction they're facing
        let projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . .
            . . . . . . 2 2 2 2 . . . . . .
            . . . . 2 2 2 5 5 2 2 2 . . . .
            . . . 2 2 5 5 5 5 5 5 2 2 . . .
            . . 2 2 5 5 5 5 5 5 5 5 2 2 . .
            . . 2 5 5 5 5 5 5 5 5 5 5 2 . .
            . 2 2 5 5 5 5 5 5 5 5 5 5 2 2 .
            . 2 2 5 5 5 5 5 5 5 5 5 5 2 2 .
            . 2 2 5 5 5 5 5 5 5 5 5 5 2 2 .
            . 2 2 5 5 5 5 5 5 5 5 5 5 2 2 .
            . . 2 5 5 5 5 5 5 5 5 5 5 2 . .
            . . 2 2 5 5 5 5 5 5 5 5 2 2 . .
            . . . 2 2 5 5 5 5 5 5 2 2 . . .
            . . . . 2 2 2 5 5 2 2 2 . . . .
            . . . . . . 2 2 2 2 . . . . . .
            . . . . . . . . . . . . . . . .
        `, player1, 100 * player1Facing, 0)
        projectile.setKind(SpriteKindLegacy.Player1Projectile)
    } else if (player == mp.playerSelector(mp.PlayerNumber.Two)) {
        // Player 2 shoots with A (manual control if AI disabled)
        let projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . .
            . . . . . . 7 7 7 7 . . . . . .
            . . . . 7 7 7 8 8 7 7 7 . . . .
            . . . 7 7 8 8 8 8 8 8 7 7 . . .
            . . 7 7 8 8 8 8 8 8 8 8 7 7 . .
            . . 7 8 8 8 8 8 8 8 8 8 8 7 . .
            . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
            . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
            . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
            . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
            . . 7 8 8 8 8 8 8 8 8 8 8 7 . .
            . . 7 7 8 8 8 8 8 8 8 8 7 7 . .
            . . . 7 7 8 8 8 8 8 8 7 7 . . .
            . . . . 7 7 7 8 8 7 7 7 . . . .
            . . . . . . 7 7 7 7 . . . . . .
            . . . . . . . . . . . . . . . .
        `, player2, 100 * player2Facing, 0)
        projectile.setKind(SpriteKindLegacy.Player2Projectile)
    }
})

// Player 1 controls - B to jump, Player 2 controls - B to jump
mp.onButtonEvent(mp.MultiplayerButton.B, ControllerButtonEvent.Pressed, function (player) {
    if (menuActive) return  // Don't jump while in menu

    if (player == mp.playerSelector(mp.PlayerNumber.One)) {
        // Player 1 jumps with B
        if (player1OnGround) {
            player1.vy = -150
        }
    } else if (player == mp.playerSelector(mp.PlayerNumber.Two)) {
        // Player 2 jumps with B
        if (player2OnGround) {
            player2.vy = -150
        }
    }
})

// Collision - Player 2 hit by Player 1's projectile
sprites.onOverlap(SpriteKindLegacy.Player1Projectile, SpriteKind.Player, function (projectile, player) {
    if (player == player2) {
        projectile.destroy()
        let health = mp.getPlayerState(mp.playerSelector(mp.PlayerNumber.Two), MultiplayerState.score)
        mp.changePlayerStateBy(mp.playerSelector(mp.PlayerNumber.Two), MultiplayerState.score, -1)
        player2.startEffect(effects.fire, 200)
        if (health <= 1) {
            game.over(true, effects.confetti)
        }
    }
})

// Collision - Player 1 hit by Player 2's projectile
sprites.onOverlap(SpriteKindLegacy.Player2Projectile, SpriteKind.Player, function (projectile, player) {
    if (player == player1) {
        projectile.destroy()
        let health = mp.getPlayerState(mp.playerSelector(mp.PlayerNumber.One), MultiplayerState.score)
        mp.changePlayerStateBy(mp.playerSelector(mp.PlayerNumber.One), MultiplayerState.score, -1)
        player1.startEffect(effects.fire, 200)
        if (health <= 1) {
            game.over(false, effects.dissolve)
        }
    }
})

// Platform collision and respawn
game.onUpdate(function () {
    player1OnGround = false
    player2OnGround = false

    for (let platform of platforms) {
        // Player 1
        if (player1.bottom >= platform.top - 2 &&
            player1.bottom <= platform.top + 5 &&
            player1.right > platform.left + 2 &&
            player1.left < platform.right - 2 &&
            player1.vy >= 0) {
            player1.bottom = platform.top
            player1.vy = 0
            player1OnGround = true
        }

        // Player 2
        if (player2.bottom >= platform.top - 2 &&
            player2.bottom <= platform.top + 5 &&
            player2.right > platform.left + 2 &&
            player2.left < platform.right - 2 &&
            player2.vy >= 0) {
            player2.bottom = platform.top
            player2.vy = 0
            player2OnGround = true
        }
    }

    // Respawn if fall off
    if (player1.bottom > 120) {
        player1.setPosition(30, 50)  // Higher spawn position
        player1.vy = 0  // Reset vertical velocity
        player1.vx = 0  // Reset horizontal velocity
    }
    if (player2.bottom > 120) {
        player2.setPosition(130, 50)  // Higher spawn position
        player2.vy = 0  // Reset vertical velocity
        player2.vx = 0  // Reset horizontal velocity
    }

    // Track Player 1 facing direction based on movement
    if (player1.vx > 5) {
        player1Facing = 1
    } else if (player1.vx < -5) {
        player1Facing = -1
    }

    // Advanced AI Controller for Player 2
    if (aiEnabled) {
        let distanceX = player1.x - player2.x
        let distanceY = player1.y - player2.y
        let distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY)

        // AI Prediction - predict where player will be (harder difficulties)
        let predictedX = player1.x + player1.vx * (difficultySettings.reactionTime / 10)
        let predictedDistanceX = predictedX - player2.x

        // Update AI facing direction based on movement
        if (player2.vx > 5) {
            player2Facing = 1
        } else if (player2.vx < -5) {
            player2Facing = -1
        }

        // Strategy switching (faster on harder difficulties)
        aiStrategyTimer--
        if (aiStrategyTimer <= 0) {
            // Expert AI uses more aggressive strategies
            if (aiDifficulty >= 4) {
                aiStrategy = Math.randomRange(0, 1)  // Mostly aggressive/defensive
            } else if (aiDifficulty >= 3) {
                aiStrategy = Math.randomRange(0, 2)
            } else {
                aiStrategy = Math.randomRange(0, 2)
            }
            aiStrategyTimer = difficultySettings.strategyChangeSpeed + Math.randomRange(0, 60)
        }

        // Check for incoming projectiles to dodge
        let incomingProjectile = false
        let projectileDistance = 999
        for (let sprite of sprites.allOfKind(SpriteKindLegacy.Player1Projectile)) {
            let dist = Math.abs(sprite.x - player2.x)
            if (Math.abs(sprite.y - player2.y) < 20 &&
                ((sprite.vx > 0 && sprite.x < player2.x && sprite.x > player2.x - 70) ||
                    (sprite.vx < 0 && sprite.x > player2.x && sprite.x < player2.x + 70))) {
                incomingProjectile = true
                projectileDistance = Math.min(projectileDistance, dist)
                break
            }
        }

        // Movement AI based on strategy and difficulty
        if (incomingProjectile && Math.random() < difficultySettings.dodgeChance) {
            // DODGING: Try to avoid incoming projectiles
            aiDodgeTimer = difficultySettings.reactionTime
            if (player2OnGround && projectileDistance < 40) {
                player2.vy = -150  // Jump to dodge
            }
            // Move perpendicular to avoid
            player2.vx = distanceX > 0 ? -difficultySettings.moveSpeed * 0.9 : difficultySettings.moveSpeed * 0.9
        } else if (aiDodgeTimer > 0) {
            aiDodgeTimer--
            player2.vx = distanceX > 0 ? -difficultySettings.moveSpeed * 0.8 : difficultySettings.moveSpeed * 0.8
        } else if (aiStrategy == 0) {
            // AGGRESSIVE: Chase player directly (use prediction on harder difficulties)
            let targetDist = aiDifficulty >= 2 ? predictedDistanceX : distanceX
            if (Math.abs(targetDist) > 15) {
                player2.vx = targetDist > 0 ? difficultySettings.moveSpeed : -difficultySettings.moveSpeed
            } else {
                player2.vx = 0
            }
        } else if (aiStrategy == 1) {
            // DEFENSIVE: Keep optimal distance, maintain high ground
            let optimalDistance = aiDifficulty >= 3 ? 60 : 50
            if (distance < optimalDistance - 10) {
                // Too close, back away
                player2.vx = distanceX > 0 ? -difficultySettings.moveSpeed * 0.85 : difficultySettings.moveSpeed * 0.85
            } else if (distance > optimalDistance + 30) {
                // Too far, move closer
                player2.vx = distanceX > 0 ? difficultySettings.moveSpeed * 0.85 : -difficultySettings.moveSpeed * 0.85
            } else {
                // Good distance, strafe (expert strafes more)
                let strafeSpeed = aiDifficulty >= 4 ? 50 : 30
                player2.vx = Math.random() < 0.5 ? strafeSpeed : -strafeSpeed
            }
        } else {
            // FLANKING: Try to get above or to the side
            if (distanceY > 15) {
                // Player is below, stay high
                if (Math.abs(distanceX) > 40) {
                    player2.vx = distanceX > 0 ? difficultySettings.moveSpeed * 0.7 : -difficultySettings.moveSpeed * 0.7
                } else {
                    player2.vx = 0
                }
            } else {
                // Try to flank horizontally
                if (Math.abs(distanceX) < 70) {
                    player2.vx = distanceX > 0 ? -difficultySettings.moveSpeed : difficultySettings.moveSpeed
                } else {
                    player2.vx = distanceX > 0 ? difficultySettings.moveSpeed * 0.7 : -difficultySettings.moveSpeed * 0.7
                }
            }
        }

        // Smart jumping AI (better on harder difficulties)
        aiJumpCooldown--
        if (aiJumpCooldown <= 0 && player2OnGround) {
            let shouldJump = false

            // Jump if player is significantly above
            if (distanceY < -25) {
                shouldJump = true
            }

            // Jump to reach higher platforms (more aggressive on hard+)
            if (aiStrategy == 1 && distanceY > -10) {
                shouldJump = Math.random() < (aiDifficulty >= 3 ? 0.05 : 0.03)
            }

            // Jump if close to edge (better edge awareness on harder difficulties)
            let edgeDistance = aiDifficulty >= 3 ? 15 : 10
            if (player2.x < edgeDistance || player2.x > 160 - edgeDistance) {
                shouldJump = Math.random() < (aiDifficulty >= 3 ? 0.6 : 0.4)
            }

            // Jump over incoming projectiles (better reaction on harder)
            if (incomingProjectile && Math.random() < difficultySettings.dodgeChance) {
                shouldJump = true
            }

            // Expert AI does tactical jumps
            if (aiDifficulty >= 4 && aiStrategy == 0 && distanceY > -15 && Math.random() < 0.04) {
                shouldJump = true
            }

            if (shouldJump) {
                player2.vy = -150
                aiJumpCooldown = aiDifficulty >= 3 ? 20 : 25
            }
        }

        // Smart shooting AI with accuracy and prediction
        aiShootCooldown--
        if (aiShootCooldown <= 0) {
            let shouldShoot = false

            // Check if player is in line of sight (use prediction for hard+)
            let targetX = aiDifficulty >= 3 ? predictedX : player1.x
            let aimDistanceX = targetX - player2.x
            let facingPlayer = (player2Facing > 0 && aimDistanceX > 0) || (player2Facing < 0 && aimDistanceX < 0)

            // Accuracy check - miss sometimes on lower difficulties
            let willHit = Math.random() < difficultySettings.accuracy

            // Shoot if facing player and they're in range
            if (facingPlayer && Math.abs(distanceY) < 25 && distance < 100 && willHit) {
                shouldShoot = true
            }

            // Aggressive mode shoots more often
            if (aiStrategy == 0 && facingPlayer && distance < 120 && willHit) {
                shouldShoot = Math.random() < (aiDifficulty >= 3 ? 0.8 : 0.7)
            }

            // Defensive mode only shoots when well-positioned
            if (aiStrategy == 1 && facingPlayer && Math.abs(distanceY) < 15 && distance > 40 && distance < 90 && willHit) {
                shouldShoot = true
            }

            // Expert AI shoots even when moving
            if (aiDifficulty >= 4 && facingPlayer && distance < 110 && Math.abs(distanceY) < 30 && willHit) {
                shouldShoot = true
            }

            if (shouldShoot) {
                let projectile = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . .
                    . . . . . . 7 7 7 7 . . . . . .
                    . . . . 7 7 7 8 8 7 7 7 . . . .
                    . . . 7 7 8 8 8 8 8 8 7 7 . . .
                    . . 7 7 8 8 8 8 8 8 8 8 7 7 . .
                    . . 7 8 8 8 8 8 8 8 8 8 8 7 . .
                    . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
                    . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
                    . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
                    . 7 7 8 8 8 8 8 8 8 8 8 8 7 7 .
                    . . 7 8 8 8 8 8 8 8 8 8 8 7 . .
                    . . 7 7 8 8 8 8 8 8 8 8 7 7 . .
                    . . . 7 7 8 8 8 8 8 8 7 7 . . .
                    . . . . 7 7 7 8 8 7 7 7 . . . .
                    . . . . . . 7 7 7 7 . . . . . .
                    . . . . . . . . . . . . . . . .
                `, player2, 100 * player2Facing, 0)
                projectile.setKind(SpriteKindLegacy.Player2Projectile)
                aiShootCooldown = difficultySettings.shootCooldownMin + Math.randomRange(0, difficultySettings.shootCooldownMax - difficultySettings.shootCooldownMin)
            }
        }
    }
})

// Function to set difficulty
function setDifficulty(level: number) {
    aiDifficulty = level
    switch (level) {
        case 0: // Easy
            difficultySettings.moveSpeed = 45
            difficultySettings.shootCooldownMin = 60
            difficultySettings.shootCooldownMax = 90
            difficultySettings.accuracy = 0.4
            difficultySettings.reactionTime = 35
            difficultySettings.dodgeChance = 0.2
            difficultySettings.strategyChangeSpeed = 240
            break
        case 1: // Medium
            difficultySettings.moveSpeed = 60
            difficultySettings.shootCooldownMin = 45
            difficultySettings.shootCooldownMax = 70
            difficultySettings.accuracy = 0.6
            difficultySettings.reactionTime = 25
            difficultySettings.dodgeChance = 0.4
            difficultySettings.strategyChangeSpeed = 200
            break
        case 2: // Normal
            difficultySettings.moveSpeed = 70
            difficultySettings.shootCooldownMin = 35
            difficultySettings.shootCooldownMax = 60
            difficultySettings.accuracy = 0.75
            difficultySettings.reactionTime = 20
            difficultySettings.dodgeChance = 0.5
            difficultySettings.strategyChangeSpeed = 180
            break
        case 3: // Hard
            difficultySettings.moveSpeed = 85
            difficultySettings.shootCooldownMin = 25
            difficultySettings.shootCooldownMax = 45
            difficultySettings.accuracy = 0.85
            difficultySettings.reactionTime = 12
            difficultySettings.dodgeChance = 0.7
            difficultySettings.strategyChangeSpeed = 140
            break
        case 4: // Expert
            difficultySettings.moveSpeed = 95
            difficultySettings.shootCooldownMin = 18
            difficultySettings.shootCooldownMax = 35
            difficultySettings.accuracy = 0.95
            difficultySettings.reactionTime = 8
            difficultySettings.dodgeChance = 0.85
            difficultySettings.strategyChangeSpeed = 100
            break
    }
}

// Difficulty selection menu
let menuSelection = 2
let menuActive = true
let difficultyNames = ["EASY", "MEDIUM", "NORMAL", "HARD", "EXPERT"]
let difficultyColors = [7, 5, 2, 4, 2]

function showDifficultyMenu() {
    scene.setBackgroundColor(9)

    // Create blue sky background with clouds
    scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111199999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
`)

    // Title with fancy styling
    let titleSprite = textsprite.create("SHOOTER", 0, 15)
    titleSprite.setPosition(80, 15)
    titleSprite.setMaxFontHeight(12)
    titleSprite.setBorder(1, 2)
    titleSprite.setOutline(1, 1)

    let subtitleSprite = textsprite.create("SHOWDOWN", 0, 2)
    subtitleSprite.setPosition(80, 28)
    subtitleSprite.setMaxFontHeight(10)
    subtitleSprite.setBorder(1, 4)
    subtitleSprite.setOutline(1, 1)

    // Decorative elements
    let leftDecor = sprites.create(img`
        . . . 2 2 2 2 2 2 2 2 2 . . .
        . . 2 2 5 5 5 5 5 5 5 2 2 . .
        . 2 2 5 5 5 5 5 5 5 5 5 2 2 .
        2 2 5 5 5 5 5 5 5 5 5 5 5 2 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 2 5 5 5 5 5 5 5 5 5 5 5 2 2
        . 2 2 5 5 5 5 5 5 5 5 5 2 2 .
        . . 2 2 5 5 5 5 5 5 5 2 2 . .
        . . . 2 2 2 2 2 2 2 2 2 . . .
    `, SpriteKind.Food)
    leftDecor.setPosition(15, 22)

    let rightDecor = sprites.create(img`
        . . . 2 2 2 2 2 2 2 2 2 . . .
        . . 2 2 5 5 5 5 5 5 5 2 2 . .
        . 2 2 5 5 5 5 5 5 5 5 5 2 2 .
        2 2 5 5 5 5 5 5 5 5 5 5 5 2 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 2 5 5 5 5 5 5 5 5 5 5 5 2 2
        . 2 2 5 5 5 5 5 5 5 5 5 2 2 .
        . . 2 2 5 5 5 5 5 5 5 2 2 . .
        . . . 2 2 2 2 2 2 2 2 2 . . .
    `, SpriteKind.Food)
    rightDecor.setPosition(145, 22)

    // Instructions with better styling
    let instructSprite = textsprite.create("UP/DOWN: Select | A: Start", 0, 5)
    instructSprite.setPosition(80, 108)
    instructSprite.setMaxFontHeight(6)
    instructSprite.setBorder(1, 1)
}

showDifficultyMenu()

// Menu controls
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (menuActive) {
        menuSelection = Math.max(0, menuSelection - 1)
        updateMenuDisplay()
    }
})

controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (menuActive) {
        menuSelection = Math.min(4, menuSelection + 1)
        updateMenuDisplay()
    }
})

let menuSprites: TextSprite[] = []

function updateMenuDisplay() {
    // Clear old menu items
    for (let sprite of menuSprites) {
        sprite.destroy()
    }
    menuSprites = []

    // Create a nice selection box
    let selectionBox = sprites.create(img`
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
    `, SpriteKind.Food)
    selectionBox.setPosition(80, 50 + menuSelection * 11)
    selectionBox.z = -1

    // Create menu items with better visuals
    for (let i = 0; i < 5; i++) {
        let itemText = difficultyNames[i]
        let isSelected = i == menuSelection

        // Add arrow indicators for selected item
        if (isSelected) {
            itemText = ">> " + itemText + " <<"
        }

        let itemSprite = textsprite.create(itemText, 0, difficultyColors[i])
        itemSprite.setPosition(80, 50 + i * 11)

        if (isSelected) {
            itemSprite.setMaxFontHeight(10)
            itemSprite.setBorder(1, 15)
            itemSprite.setOutline(1, 1)
        } else {
            itemSprite.setMaxFontHeight(7)
            itemSprite.setBorder(1, 1)
        }

        menuSprites.push(itemSprite)
    }
}

updateMenuDisplay()

function startGame() {
    // Clear menu
    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
    scene.setBackgroundColor(9)
    scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999911111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111199999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111199999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
`)
    game.splash("GET READY!", "Difficulty: " + difficultyNames[menuSelection])
}